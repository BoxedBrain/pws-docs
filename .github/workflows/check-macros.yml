name: Enforce macro usage

on:
  pull_request:
    types: [opened, edited, reopened, synchronize, ready_for_review, review_requested]

  # Allow to run this workflow manually
  workflow_dispatch:

jobs:
  macrocheck:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Check for "MATESO"
        run: grep --include=\*.{md,txt} --exclude={README.md,index.md,client.md,contributors.md} -rnw ${GITHUB_WORKSPACE} -e "MATESO"

      - name: Check for "Password Safe"
        run: grep --include=\*.{md,txt} --exclude={README.md,index.md,client.md} -rnw ${GITHUB_WORKSPACE} -e "Password Safe"